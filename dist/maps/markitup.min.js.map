{"version":3,"sources":["markitup.js"],"names":["context","factory","module","exports","define","amd","MarkItUp","this","defaults","parseSingle","parseOpen","parseClose","tab","autoTab","width","height","content","preview","previewHidden","previewWidth","previewHeight","previewServerPath","previewTemplatePath","previewRefreshOn","vars","funcs","commands","shortcuts","plugins","beforeInit","afterInit","beforePreviewRefresh","afterPreviewRefresh","beforeDialogOpen","afterDialogOpen","beforeDialogClose","afterDialogClose","beforeInsert","afterInsert","toolbar","click","window","elmt","settings","utils","extend","document","querySelector","tagName","console","error","previewTemplateCache","markItUpPath","container","dialog","overlay","tabJump","boundKeyDownEvent","boundKeyUpEvent","selectAfterParsing","start","len","textarea","shiftPressed","altPressed","ctrlPressed","metaPressed","_callback","_initPlugins","_init","_initParser","_initKeyEvents","_initPreview","prototype","defaultShortcuts","Enter","e","preventDefault","insert","tabs","select","refreshPreview","Tab","setPosition","value","length","_resetTabJump","_command","indent","Shift Tab","outdent","Up, Down, Left, Right","parent","parentNode","sibling","nextSibling","buttons","self","fragment","_initToolbar","appendChild","className","addEventListener","bind","style","body","closeDropdowns","refreshEvents","Array","isArray","forEach","event","insertBefore","display","group","row","newRow","newGroup","setting","html","button","dropdown","separator","undefined","name","icon","icons","_initDropdown","stopPropagation","addClass","_click","menu","menuRow","menuLink","submenu","widget","_funcOrArg","nodeType","single","escapeREChars","split","open","close","keywords","if","else","or","var","func","alt","selection","caret","multiline","number","regexp","RegExp","var2","selection2","caret2","function","function2","line","key","hasOwnProperty","register","_registerShortcut","_keyEvents","_keyStates","altKey","metaKey","shiftKey","ctrlKey","defaultShortcut","shortcut","keys","keyMapping","8","9","13","27","32","37","38","39","40","16","17","18","91","which","push","String","fromCharCode","toLowerCase","sort","join","toUpperCase","apply","callback","do","defaultBehavior","getMarkItUpPath","getPath","getSelection","text","autotab","replace","caretPosition","getPosition","part1","substring","part2","focus","getContainer","getTextarea","getPreview","setContent","getContent","setLine","mode","getLine","end","setSelection","lineLength","data","lines","total","position","chars","buffer","i","selectLine","line1","line2","setLinePosition","getLinePosition","selectionStart","selectionEnd","setOption","getOption","setOptions","options","getOptions","doJob","beforeBlock","before","after","afterBlock","placeholder","nlAtTheEndRE","specialAtTheEndRE","tabsAtTheBeginningRE","nlAtTheEnd","match","specialAtTheEnd","tabsAtTheBeginning","_multiline","parse","scrollTop","_triggerEvent","_dialog","insertAfter","wrap","matches","regex","string","nocaret","processVars","varname","trim","processFuncs","funcname","allValues","values","fn","args","value1","orPart","value2","elsePart","_removeTabsAtBeggining","#","parseInt","goThroughServerParser","serverPath","postValues","_replaceMarkItUpPath","markitup","_ajaxPost","parsedContent","applyTemplate","templatePath","doRefreshPreview","_ajaxGet","template","iframe","contentWindow","write","innerHTML","togglePreview","hidePreview","showPreview","getPreviewContent","textContent","Plugin","id","concat","slice","call","arguments","Function","path","markitupPath","createDialog","beforeOpen","header","cancel","submit","inputs","querySelectorAll","type","checked","closeDialog","setTimeout","firstField","afterOpen","url","beforeClose","remove","afterClose","destroy","texarea","removeChild","removeEventListener","request","XMLHttpRequest","onload","status","responseText","send","setRequestHeader","queryString","selected","insertion","createEvent","initEvent","dispatchEvent","command","scripts","getElementsByTagName","src","obj1","obj2","dropdowns","removeClass","classRE","hasClass","test","Object","map","encodeURIComponent","tag","div","createElement","table","tbody","tr","containers","thead","tfoot","td","th","childNodes","align-center","align-justify","align-left","align-right","anchor","bold","bolt","char","check","code","cogs","color","cross","file","font","italic","link","list-ol","list-ul","magic","paragraph","picture","quote","smiley","strikethrough","subscript","superscript","underline"],"mappings":"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","file":"../markitup.min.js","sourcesContent":["/*!-----------------------------------------------------------------------------\n * MarkItUp! — Boost your textareas\n * v3.0.0-0 - built 2016-11-09\n * Licensed under the MIT License.\n * http://markitup.jaysalvat.com/\n * ----------------------------------------------------------------------------\n * Copyright (C) 2007-2016 Jay Salvat\n * http://jaysalvat.com/\n * --------------------------------------------------------------------------*/\n/* global module, define */\n\n(function (context, factory) {\n    'use strict';\n\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = factory();\n    } else if (typeof define === 'function' && define.amd) {\n        define([], factory);\n    } else {\n        context.MarkItUp = factory();\n    }\n})(this, function () {\n    'use strict';\n\n    var defaults = {\n        parseSingle: '{x}',\n        parseOpen:   '{x:}',\n        parseClose:  '{:x}',\n        tab: '    ',\n        autoTab: true,\n        width: null,\n        height: null,\n        content: null,\n        preview: false,\n        previewHidden: false,\n        previewWidth: null,\n        previewHeight: null,\n        previewServerPath: null,\n        previewTemplatePath: null,\n        previewRefreshOn: [ 'markitup.insertion' ],\n        vars: {},\n        funcs: {},\n        commands: {},\n        shortcuts: {},\n        plugins: [],\n        beforeInit: null,\n        afterInit: null,\n        beforePreviewRefresh: null,\n        afterPreviewRefresh: null,\n        beforeDialogOpen: null,\n        afterDialogOpen: null,\n        beforeDialogClose: null,\n        afterDialogClose: null,\n        beforeInsert: null,\n        afterInsert: null,\n        toolbar: [\n        // {\n        //   name: '',\n        //   class '',\n        //   beforeBlock: '',\n        //   afterBlock: '',\n        //   before: '',\n        //   after: '',\n        //   content: '',\n        //   placeholder: '',\n        //   shortcut: '',\n        //   multiline: false,\n        //   select: true,\n        //   vars: {},\n        //   beforeInsert: function () {},\n        //   afterInsert: function () {},\n        //   dialog: {\n        //      header: '',\n        //      body': '',\n        //      url: '',\n        //      widget: null,\n        //      width: null,\n        //      height: null,\n        //      cancel: 'Cancel',\n        //      submit: 'Ok',\n        //      beforeOpen: null,\n        //      afterOpen: null,\n        //      beforeClose null,\n        //      afterClose: null\n        //   }\n        //   dropdown: [\n        //      ...toolbar\n        //   ]\n        // }, ...\n        ]\n    };\n\n    var click = \"ontouchstart\" in window ? 'touchstart' : 'click';\n\n    var MarkItUp = function (elmt, settings) {\n        if (!(this instanceof MarkItUp)) {\n            return new MarkItUp(elmt, settings);\n        }\n\n        settings = settings || {};\n        settings = MarkItUp.utils.extend(this.defaults, settings || {});\n\n        if (typeof elmt === 'string') {\n            elmt = document.querySelector(elmt);\n        }\n\n        if (!elmt) {\n            return;\n        }\n\n        if (elmt.tagName !== 'TEXTAREA') {\n           return console.error('markItUp! must be applied to Textareas only.');\n        }\n\n        this.previewTemplateCache = null;\n        this.markItUpPath = null;\n        this.container = null;\n        this.preview = null;\n        this.dialog = null;\n        this.overlay = null;\n        this.tabJump = null;\n        this.boundKeyDownEvent = null;\n        this.boundKeyUpEvent = null;\n        this.selectAfterParsing = { start: null, len: null};\n        this.shortcuts = {};\n        this.textarea = elmt;\n        this.settings = settings;\n        this.plugins = {};\n\n        this.shiftPressed = false;\n        this.altPressed = false;\n        this.ctrlPressed = false;\n        this.metaPressed = false;\n\n        this._callback(this.settings.beforeInit, [ this.settings ]);\n\n        this._initPlugins();\n        this._init();\n        this._initParser();\n        this._initKeyEvents();\n        this._initPreview();\n\n        this._callback(this.settings.afterInit, [ this.settings ]);\n    };\n\n    MarkItUp.prototype = {\n        defaults: defaults,\n        defaultShortcuts: {\n            \"Enter\": function (e) {\n                if (this.settings.autoTab) {\n                    e.preventDefault();\n\n                    this.insert('\\n' + this.tabs(), {\n                        'select': false\n                    });\n                } else {\n                    this.refreshPreview();\n                }\n            },\n            \"Tab\": function (e) {\n                e.preventDefault();\n\n                if (this.tabJump !== null) {\n                    this.setPosition(this.textarea.value.length - this.tabJump);\n                    this._resetTabJump();\n                } else if (!this._command()) {\n                    this.indent();\n                }\n            },\n            \"Shift Tab\": function (e) {\n                e.preventDefault();\n\n                this.outdent();\n            },\n            \"Up, Down, Left, Right\": function () {\n                this._resetTabJump();\n            }\n        },\n\n        _init: function () {\n            var parent  = this.textarea.parentNode,\n                sibling = this.textarea.nextSibling,\n                buttons = this.settings.toolbar,\n                self    = this;\n\n            var container = MarkItUp.utils.fragment('<div class=\"markitup-container\"></div>'),\n                toolbar   = this._initToolbar(buttons);\n\n            container.appendChild(toolbar);\n            container.appendChild(this.textarea);\n\n            this.container = container;\n            this.textarea.className += ' markitup-textarea';\n            this.textarea.addEventListener(click, this._resetTabJump.bind(this));\n\n            if (this.settings.content) {\n                this.textarea.value = this.settings.content;\n            }\n\n            if (this.settings.width) {\n                this.textarea.style.width = this.settings.width + 'px';\n\n                if (!this.settings.previewWidth) {\n                    this.settings.previewWidth = this.settings.width;\n                }\n            }\n\n            if (this.settings.height) {\n                this.textarea.style.height = this.settings.height + 'px';\n\n                if (!this.settings.previewHeight) {\n                    this.settings.previewHeight = this.settings.height;\n                }\n            }\n\n            // Close dropdown when body if clicked\n            document.body.addEventListener(click, MarkItUp.utils.closeDropdowns);\n\n            // Listen textarea events in order to trigger a preview refresh\n            var refreshEvents = this.settings.previewRefreshOn;\n\n            if (!Array.isArray(refreshEvents)) {\n                refreshEvents = [ refreshEvents ];\n            }\n\n            refreshEvents.forEach(function (event) {\n                self.textarea.addEventListener(event, function () {\n                    self.refreshPreview();\n                });\n            });\n\n            if (sibling) {\n                parent.insertBefore(container, sibling);\n            } else {\n                parent.appendChild(container);\n            }\n        },\n\n        _initPreview: function () {\n            var preview;\n\n            // If preview: true we create the preview iFrame\n            if (this.settings.preview === true) {\n                preview = MarkItUp.utils.fragment('<iframe class=\"markitup-preview\"></iframe>');\n\n                if (this.settings.previewWidth) {\n                    preview.style.width = this.settings.previewWidth + 'px';\n                }\n\n                if (this.settings.previewHeight) {\n                    preview.style.height = this.settings.previewHeight + 'px';\n                }\n\n                if (this.settings.previewHidden) {\n                    preview.style.display = 'none';\n                }\n\n                this.container.appendChild(preview);\n\n            // If preview is a DOM Element\n            } else if (typeof this.settings.preview === 'object') {\n                preview = this.settings.preview;\n\n            // If preview is a selector\n            } else if (typeof this.settings.preview === 'string') {\n                preview = document.querySelector(this.settings.preview);\n            }\n\n            this.preview = preview;\n\n            this.refreshPreview();\n        },\n\n        _initToolbar: function (settings) {\n            var self     = this,\n                newRow   = true,\n                newGroup = true,\n                toolbar,\n                group,\n                row;\n\n            toolbar = MarkItUp.utils.fragment('<div class=\"markitup-toolbar\"></div>');\n\n            settings.forEach(function (setting) {\n                var html,\n                    button,\n                    dropdown;\n\n                if (setting.row) {\n                    newRow = true;\n                    return;\n                }\n\n                if (setting.separator) {\n                    newGroup = true;\n                    return;\n                }\n\n                if (setting.name === undefined) {\n                    return;\n                }\n\n                if (newRow) {\n                    row = MarkItUp.utils.fragment('<div class=\"markitup-button-row\"></div>');\n                    newRow = false;\n                    newGroup = true;\n                    toolbar.appendChild(row);\n                }\n\n                if (newGroup) {\n                    group = MarkItUp.utils.fragment('<div class=\"markitup-button-group\"></div>');\n                    newGroup = false;\n                    row.appendChild(group);\n                }\n\n                html  = '<div class=\"markitup-button-wrapper ' + (setting.className || '') + '\">';\n                html +=   '<button class=\"markitup-button\" title=\"' + setting.name + '\">';\n\n                if (setting.icon) {\n                    html += '<div class=\"markitup-icon markitup-icon-' + setting.icon + '\">';\n                    html += MarkItUp.icons[setting.icon];\n                    html += '</div>';\n                }\n                html +=     '<span>' + setting.name + '</span>';\n                if (setting.dropdown) {\n                    html += '<div class=\"markitup-caret\"></div>';\n                }\n                html +=   '</button>';\n                html += '</div>';\n\n                button = MarkItUp.utils.fragment(html);\n\n                if (setting.dropdown) {\n                    dropdown = self._initDropdown(setting.dropdown);\n\n                    button.addEventListener(click, function (e) {\n                        e.stopPropagation();\n                        e.preventDefault();\n\n                        MarkItUp.utils.addClass(this, 'markitup-open');\n                    });\n\n                    button.appendChild(dropdown);\n                } else {\n                    self._click(button.querySelector('button'), setting);\n                }\n\n                group.appendChild(button);\n            });\n\n            return toolbar;\n        },\n\n        _initDropdown: function (settings) {\n            var self = this, menu;\n\n            menu = MarkItUp.utils.fragment('<ul class=\"markitup-dropdown\"></ul>');\n\n            settings.forEach(function (setting) {\n                var html,\n                    menuRow,\n                    menuLink,\n                    submenu,\n                    widget;\n\n                menuRow = MarkItUp.utils.fragment('<li class=\"' + (setting.className || '') + '\"></li>');\n\n                if (setting.width) {\n                    menu.style.width = setting.width + 'px';\n                }\n\n                widget = self._funcOrArg(setting.widget);\n\n                if (typeof widget === 'object' && widget.nodeType === 1) {\n                    menuRow.appendChild(widget);\n\n                } else {\n                    html = '<a href=\"#\">';\n                    if (setting.icon) {\n                        html += '<i class=\"' + setting.icon + '\"></i>';\n                    }\n                    html += setting.name;\n                    if (setting.dropdown) {\n                        html += '<div class=\"markitup-caret\"></div>';\n                    }\n                    html += '</a>';\n\n                    menuLink = MarkItUp.utils.fragment(html);\n\n                    self._click(menuLink, setting);\n\n                    menuRow.appendChild(menuLink);\n                }\n\n                if (setting.dropdown) {\n                    submenu = self._initDropdown(setting.dropdown);\n\n                    menuRow.addEventListener(click, function (e) {\n                        MarkItUp.utils.addClass(this, 'markitup-open');\n                        e.stopPropagation();\n                    });\n\n                    menuRow.appendChild(submenu);\n                }\n\n                menu.appendChild(menuRow);\n            });\n\n            return menu;\n        },\n\n        _initParser: function () {\n            var single = MarkItUp.utils.escapeREChars(this.settings.parseSingle).split(/x+/),\n                open   = MarkItUp.utils.escapeREChars(this.settings.parseOpen).split(/x+/),\n                close  = MarkItUp.utils.escapeREChars(this.settings.parseClose).split(/x+/);\n\n            single[0] = single[0] + ' *';\n            single[1] = ' *' + single[1];\n\n            open[0] = open[0] + ' *';\n            open[1] = ' *' + open[1];\n\n            close[0] = close[0] + ' *';\n            close[1] = ' *' + close[1];\n\n            var keywords = {\n                'if':        'IF',\n                'else':      'ELSE',\n                'or':        'OR',\n                'var':       'VAR',\n                'func':      'FN',\n                'alt':       'A',\n                'tab':       'T',\n                'selection': 'S',\n                'caret':     'C',\n                'multiline': 'M',\n                'number':    '#'\n            };\n\n            this.regexp = {\n                'if':         new RegExp(open[0]   + keywords.if + ' (\\\\w+)' + open[1] + '(.*?)(' + single[0] + keywords.else + single[1] + '(.*?))?' + close[0] + keywords.if + close[1], 'g'),\n                'alt':        new RegExp(open[0]   + keywords.alt + open[1] + '(.*?)(' + single[0] + keywords.or + single[1] + '(.*?))?' + close[0] + keywords.alt + close[1], 'g'),\n                'var':        new RegExp(single[0] + keywords.var + ' (\\\\w+)' + single[1], 'g'),\n                'var2':       new RegExp(open[0]   + keywords.var + ' (\\\\w+)' + open[1] + '(.*?)' + close[0] + keywords.var + close[1], 'g'),\n                'selection':  new RegExp(single[0] + keywords.selection + single[1], 'g'),\n                'selection2': new RegExp(open[0]   + keywords.selection + open[1] + '(.*?)' + close[0] + keywords.selection + close[1], 'g'),\n                'caret':      new RegExp(single[0] + keywords.caret + single[1], 'g'),\n                'caret2':     new RegExp(open[0]   + keywords.caret + open[1] + '(.*?)' + close[0] + keywords.caret + close[1], 'g'),\n                'function':   new RegExp(single[0] + keywords.func + ' (\\\\w+)( *\\\\((.*?)\\\\))?' + single[1], 'g'),\n                'function2':  new RegExp(open[0]   + keywords.func + ' (\\\\w+)( *\\\\((.*?)\\\\))?' + open[1] + '(.*?)' + close[0] + keywords.func + close[1], 'g'),\n                'tab':        new RegExp(single[0] + keywords.tab + '(\\\\d*)' + single[1], 'g'),\n                'multiline':  new RegExp(open[0]   + keywords.multiline + open[1] + '(.*?)' + close[0] + keywords.multiline + close[1], 'g'),\n                'line':       new RegExp(single[0] + keywords.multiline + single[1], 'g'),\n                'number':     new RegExp(single[0] + keywords.number + single[1], 'g')\n            };\n        },\n\n        _initPlugins: function () {\n            var self = this,\n                plugins = MarkItUp.plugins;\n\n            for (var key in plugins) {\n                if (plugins.hasOwnProperty(key)) {\n                    self.register(plugins[key]);\n                }\n            }\n        },\n\n        _initKeyEvents: function () {\n            var shortcuts, key;\n\n            shortcuts = this.defaultShortcuts;\n\n            for (key in shortcuts) {\n                if (shortcuts.hasOwnProperty(key)) {\n                    this._registerShortcut(key, shortcuts[key], true);\n                }\n            }\n\n            shortcuts = this.settings.shortcuts;\n\n            for (key in shortcuts) {\n                if (shortcuts.hasOwnProperty(key)) {\n                    this._registerShortcut(key, shortcuts[key]);\n                }\n            }\n\n            this.boundKeyDownEvent = this._keyEvents.bind(this);\n            this.textarea.addEventListener('keydown', this.boundKeyDownEvent);\n\n            this.container.addEventListener('keydown', this._keyStates.bind(this));\n            this.container.addEventListener('keyup',   this._keyStates.bind(this));\n        },\n\n        _keyStates: function (e) {\n            this.altPressed   = e.altKey;\n            this.metaPressed  = e.metaKey;\n            this.shiftPressed = e.shiftKey;\n            this.ctrlPressed  = e.ctrlKey;\n        },\n\n        _keyEvents: function (e, defaultShortcut) {\n            var shortcuts,\n                shortcut,\n                keys = [],\n                keyMapping = {\n                     '8': 'backspace',\n                     '9': 'tab',\n                    '13': 'enter',\n                    '27': 'esc',\n                    '32': 'space',\n                    '37': 'left',\n                    '38': 'up',\n                    '39': 'right',\n                    '40': 'down',\n                    '16': null, // SHIFT\n                    '17': null, // CTRL\n                    '18': null, // ALT\n                    '91': null, // META\n                };\n\n            if (keyMapping[e.which] !== undefined) {\n                keys.push(keyMapping[e.which]);\n            } else {\n                if (keyMapping[e.which] !== null) {\n                    keys.push(String.fromCharCode(e.which).toLowerCase());\n                }\n            }\n\n            if (e.metaKey) {\n                keys.push('meta');\n            }\n\n            if (e.shiftKey) {\n                keys.push('shift');\n            }\n\n            if (e.ctrlKey) {\n                keys.push('ctrl');\n            }\n\n            if (e.altKey) {\n                keys.push('alt');\n            }\n\n            keys.sort();\n\n            shortcut = keys.join(' ').toUpperCase();\n\n            if (defaultShortcut) {\n                shortcuts = this.defaultShortcuts;\n            } else {\n                shortcuts = this.shortcuts;\n            }\n\n            if (typeof shortcuts[shortcut] === 'function') {\n                shortcuts[shortcut].apply(this, [ e ]);\n            }\n        },\n\n        _registerShortcut: function (shortcut, callback, defaultShortcut) {\n            var self = this, keys;\n\n            shortcut.split(/, ?/).forEach(function (shortcut) {\n                shortcut = shortcut.toLowerCase();\n                keys = shortcut.split(' ');\n                keys.sort();\n                shortcut = keys.join(' ').toUpperCase();\n\n                if (typeof callback === 'object') {\n                    var settings = callback;\n\n                    callback = function () {\n                        self.do(settings);\n                    };\n                }\n\n                if (typeof callback === 'string') {\n                    var content = callback;\n\n                    callback = function () {\n                        self.insert(content);\n                    };\n                }\n\n                if (typeof callback === 'function') {\n                    self.shortcuts[shortcut] = callback;\n\n                    if (defaultShortcut) {\n                        self.defaultShortcuts[shortcut] = callback;\n                    }\n                }\n            });\n\n            if (defaultShortcut) {\n                delete this.defaultShortcuts[shortcut];\n            }\n\n            return shortcut;\n        },\n\n        defaultBehavior: function (e) {\n            this._keyEvents(e, true);\n        },\n\n        getMarkItUpPath: function () {\n            if (this.markItUpPath) {\n                return this.markItUpPath;\n            }\n\n            this.markItUpPath = MarkItUp.utils.getPath();\n\n            return this.markItUpPath;\n        },\n\n        indent: function () {\n            this.insertBefore(this.settings.tab, {\n                select:    this.getSelection().text ? 'outer' : false,\n                multiline: true,\n                autotab:   false\n            });\n        },\n\n        outdent: function () {\n            var content = this.getSelection().text;\n\n            // If selection, remove tab from selection\n            if (content) {\n                content = content.replace(new RegExp('^'  + this.settings.tab, 'g'), '');\n                content = content.replace(new RegExp('\\n' + this.settings.tab, 'g'), '\\n');\n\n                this.insert(content, {\n                    select: !!this.getSelection().text,\n                    autotab: false\n                });\n\n            // Otherwhise, remove tabs before caret position\n            } else {\n                var caretPosition = this.getPosition(),\n                    part1 = this.textarea.value.substring(0, caretPosition),\n                    part2 = this.textarea.value.substring(caretPosition);\n\n                part1 = part1.replace(new RegExp(this.settings.tab + '$', 'g'), '');\n\n                this.textarea.value = part1 + part2;\n                this.setPosition(part1.length);\n                this.textarea.focus();\n            }\n        },\n\n        getContainer: function () {\n            return this.container;\n        },\n\n        getTextarea: function () {\n            return this.textarea;\n        },\n\n        getPreview: function () {\n            return this.preview;\n        },\n\n        setContent: function (content) {\n            this.textarea.value = content;\n        },\n\n        getContent: function () {\n            return this.textarea.value;\n        },\n\n        setLine: function (which, mode) {\n            var line = this.getLine(which);\n\n            if (!line) {\n                return;\n            }\n\n            if (mode === 'end') {\n                this.setPosition(line.end - 1);\n            } else if (mode === 'select') {\n                this.setSelection(line.start, line.len);\n            } else {\n                this.setPosition(line.start);\n            }\n\n            return line;\n        },\n\n        getLine: function (which) {\n            var content = this.textarea.value,\n                lines = content.split(/\\r?\\n/),\n                total = lines.length,\n                position = this.getPosition(),\n                chars = 0,\n                buffer = 0,\n                lineLength,\n                data;\n\n            if (which !== undefined && which !== 'current') {\n                position = null;\n            }\n\n            for (var i = 0; i < total; i++) {\n                lineLength = lines[i].length + 1;\n\n                chars += lineLength;\n\n                data = {\n                    number: i + 1,\n                    start:  buffer,\n                    end:    chars,\n                    len:    lineLength,\n                    total:  total,\n                    text:   lines[i]\n                };\n\n                if (\n                    (which === 'first' && i === 0) ||\n                    (which === 'last'  && i === total - 1) ||\n                    (which === i + 1) ||\n                    (position && position >= buffer && position < chars)\n                ) {\n                    return  data;\n                }\n\n                buffer = chars;\n            }\n        },\n\n        selectLine: function (which, len) {\n            var line1, line2;\n\n            if (!which) {\n                return;\n            }\n\n            if (len) {\n                line1 = this.getLine(which);\n                line2 = this.getLine(which + len - 1);\n\n                if (!line2) {\n                    line2 = this.getLine('last');\n                }\n\n                return this.setSelection(line1.start, line2.end - line1.start);\n            }\n\n            return this.setLine(which, 'select');\n        },\n\n        setPosition: function (position) {\n            if (position === 'first') {\n                this.setSelection(0, 0);\n            } else if (position === 'last') {\n                this.setSelection(this.textarea.value.length, 0);\n            } else {\n                this.setSelection(position, 0);\n            }\n        },\n\n        getPosition: function () {\n            return this.getSelection().start;\n        },\n\n        setLinePosition: function (which, position) {\n            var line = this.getLine(which);\n\n            if (!line) {\n                return;\n            }\n\n            this.setPosition(line.start + position);\n        },\n\n        getLinePosition: function () {\n            var line = this.getLine('current');\n\n            if (!line) {\n                return;\n            }\n\n            return {\n                line: line.number,\n                position: this.getPosition() - line.start\n            };\n        },\n\n        getSelection: function () {\n            var start = this.textarea.selectionStart,\n                end   = this.textarea.selectionEnd,\n                text  = this.textarea.value.substring(start, end);\n\n            return {\n                'start': start,\n                'end':   end,\n                'text':  text,\n                'len':   text.length\n            };\n        },\n\n        setSelection: function (start, len) {\n            this.textarea.selectionStart = start;\n            this.textarea.selectionEnd   = start + len;\n        },\n\n        setOption: function (key, value) {\n            this.settings[key] = value;\n        },\n\n        getOption: function (key) {\n            return this.settings[key];\n        },\n\n        setOptions: function (options) {\n            this.settings = MarkItUp.utils.extend(this.settings, options);\n        },\n\n        getOptions: function () {\n            return this.settings;\n        },\n\n        do: function (settings) {\n            var self = this;\n\n            if (settings.dialog) {\n                this._dialog(settings.dialog, function (vars) {\n                    settings.vars = MarkItUp.utils.extend(settings.vars, vars);\n\n                    doJob(settings);\n                });\n            } else {\n                doJob(settings);\n            }\n\n            function doJob (settings) {\n                self.textarea.focus();\n\n                var selection   = self.getSelection(),\n                    beforeBlock = self._funcOrArg(settings.beforeBlock) || '',\n                    before      = self._funcOrArg(settings.before) || '',\n                    after       = self._funcOrArg(settings.after) || '',\n                    afterBlock  = self._funcOrArg(settings.afterBlock) || '',\n                    placeholder = self._funcOrArg(settings.placeholder) || '',\n                    content     = self._funcOrArg(settings.content) || selection.text || placeholder,\n                    multiline   = self._funcOrArg(settings.multiline),\n                    select      = self._funcOrArg(settings.select),\n                    autotab     = self._funcOrArg(settings.autotab);\n\n                if (self.metaPressed && select === undefined) {\n                    select = self.shiftPressed ? 'outer' : 'inner';\n                } else if (placeholder && !selection.text) {\n                    select = 'inner';\n                }\n\n                if (self.shiftPressed) {\n                    multiline = true;\n                }\n\n                if (autotab === undefined) {\n                    autotab = self.settings.autoTab;\n                }\n\n                // Callbacks\n                self._callback(self.settings.beforeInsert, [ settings ]);\n                self._callback(settings.beforeInsert, [ settings ]);\n\n                var nlAtTheEndRE         = /(\\n)$/,\n                    specialAtTheEndRE    = /(\\s)$/,\n                    tabsAtTheBeginningRE = new RegExp('^' + self.tabs(), 'g'),\n                    nlAtTheEnd           = selection.text.match(nlAtTheEndRE),\n                    specialAtTheEnd      = selection.text.match(specialAtTheEndRE),\n                    tabsAtTheBeginning   = selection.text.match(tabsAtTheBeginningRE);\n\n                // Multi line Mode\n                if (multiline) {\n                    content = self._multiline(content, function (line) {\n                        if (autotab) {\n                            line = line.replace(tabsAtTheBeginningRE, '');\n                        }\n\n                        return before + line + after;\n                    });\n\n                // Single line Mode\n                } else {\n                    if (autotab) {\n                        content = content.replace(tabsAtTheBeginningRE, '');\n                    }\n\n                    // Push special char after the closing tag\n                    if (specialAtTheEnd) {\n                        content = content.replace(specialAtTheEndRE, '');\n                        content = before + content + after + specialAtTheEnd[0];\n                    } else {\n                        content = before + content + after;\n                    }\n\n                    if (nlAtTheEnd) {\n                        content = content.replace(nlAtTheEndRE, '');\n                    }\n                }\n\n                if (nlAtTheEnd && !afterBlock) {\n                    content = content + nlAtTheEnd[0];\n                }\n\n                content = beforeBlock + content + afterBlock;\n\n                if (nlAtTheEnd && afterBlock) {\n                    content = content + nlAtTheEnd[0];\n                }\n\n                // Retab all lines\n                if (autotab) {\n                    if (multiline) {\n                        content = content.replace(/\\n/g, '\\n' + self.tabs());\n                    }\n                    content = content.replace(new RegExp(self.tabs() + '$'), '');\n\n                    if (tabsAtTheBeginning) {\n                        content = self.tabs() + content;\n                    }\n                }\n\n                content = self.parse(content, settings.vars);\n\n                var part1, part2, scrollTop,\n                    start, end;\n\n                // Insert content in place\n                if (content) {\n                    part1     = self.textarea.value.substring(0, selection.start);\n                    part2     = self.textarea.value.substring(selection.end);\n                    scrollTop = self.textarea.scrollTop;\n\n                    self.textarea.value = part1 + content + part2;\n                    self.textarea.scrollTop = scrollTop;\n                }\n\n                if (after || afterBlock || self.selectAfterParsing.start) {\n                    self.tabJump = part2.length;\n                } else {\n                    self.tabJump = null;\n                }\n\n                // Parse blocks to get length after parsing\n                beforeBlock = self.parse(afterBlock, settings.vars, true);\n                afterBlock  = self.parse(afterBlock, settings.vars, true);\n                before      = self.parse(before,     settings.vars, true);\n                after       = self.parse(after,      settings.vars, true);\n\n                // Select where {C} {C:} {:C} could be defined\n                if (self.selectAfterParsing.start !== null) {\n                    self.setSelection(selection.start + self.selectAfterParsing.start, self.selectAfterParsing.len);\n\n                    self.selectAfterParsing = {\n                        start: null,\n                        len:   null\n                    };\n\n                // Otherwhise\n                } else {\n                    // Select the previously selected content\n                    if (select === 'inner' || select === true) {\n                        start = selection.start + beforeBlock.length + before.length;\n                        end   = content.length - before.length - after.length - beforeBlock.length - afterBlock.length;\n                        self.setSelection(start, end);\n\n                    // Select new content\n                    } else if (select === 'outer') {\n                        self.setSelection(selection.start, content.length);\n\n                    // No selection\n                    } else {\n                        if (selection.text) {\n                            end = selection.start + content.length;\n                        } else {\n                            end = selection.start + content.length - after.length - afterBlock.length;\n                        }\n                        self.setPosition(end);\n                    }\n                }\n\n                self.textarea.focus();\n\n                // Trigger insertion event\n                self._triggerEvent('markitup.insertion');\n\n                // Callbacks\n                self._callback(self.settings.afterInsert, [ settings ]);\n                self._callback(settings.afterInsert, [ settings ]);\n            }\n        },\n\n        insert: function (content, settings) {\n            settings = settings || {};\n\n            if (settings.multiline) {\n                content = this._multiline(this.getSelection().text, function () {\n                    return content;\n                });\n            }\n            settings.content = content;\n\n            this.do(settings);\n        },\n\n        insertBefore: function (before, settings) {\n            settings = settings || {};\n            settings.content = this.getSelection().text;\n            settings.before  = before;\n\n            this.do(settings);\n        },\n\n        insertAfter: function (after, settings) {\n            settings = settings || {};\n            settings.content = this.getSelection().text;\n            settings.after   = after;\n\n            this.do(settings);\n        },\n\n        wrap: function (before, after, settings) {\n            settings = settings || {};\n            settings.content = this.getSelection().text;\n            settings.before  = before;\n            settings.after   = after;\n\n            this.do(settings);\n        },\n\n        tabs: function () {\n            var regex = new RegExp('^(' + this.settings.tab + ')*', 'g'),\n                line  = this.getLine(),\n                matches;\n\n            if (!line) {\n                return '';\n            }\n\n            matches = line.text.match(regex);\n\n            if (matches[0]) {\n                return matches[0];\n            }\n\n            return '';\n        },\n\n        parse: function (string, vars, nocaret) {\n            var self = this, selection;\n\n            vars      = MarkItUp.utils.extend(this.settings.vars, vars);\n            string    = this._funcOrArg(string);\n            selection = this.getSelection();\n\n            if (typeof string !== 'string') {\n                return string;\n            }\n\n            var processVars = function (string, varname, placeholder) {\n                varname = varname.trim();\n\n                if (vars[varname]) {\n                    return vars[varname];\n                }\n\n                return (typeof placeholder === 'string') ? placeholder : '';\n            };\n\n            var processFuncs = function (string, funcname, allValues, values, placeholder) {\n                var fn, args = [];\n\n                funcname = funcname.trim();\n\n                if (values) {\n                    args = values.trim().split(/\\s?,\\s?/);\n                }\n\n                if (self.settings.funcs[funcname]) {\n                    fn = self.settings.funcs[funcname].apply(self, args);\n\n                    return self.parse(fn);\n                }\n\n                return (typeof placeholder === 'string') ? placeholder : '';\n            };\n\n            // Alt content: {A:}...{OR}...{:A}\n            string = string.replace(this.regexp.alt, function (string, value1, orPart, value2) {\n                if (self.altPressed) {\n                    return value2 || '';\n                }\n\n                return value1;\n            });\n\n            // if: {IF varname:}...{ELSE}...{:IF}\n            string = string.replace(this.regexp.if, function (string, varname, value1, elsePart, value2) {\n                if (vars[varname]) {\n                    return value1;\n                } else if (elsePart) {\n                    return value2;\n                }\n\n                return '';\n            });\n\n            // multiline: {M:}...{M}...{:M}\n            string = string.replace(this.regexp.multiline, function (string, line) {\n                var lines = selection.text.trim().split(/\\r?\\n/);\n\n               for (var i = 0; i < lines.length; i++) {\n                    lines[i] = self._removeTabsAtBeggining(lines[i]);\n                    lines[i] = self.parse(line.replace(self.regexp.line, lines[i]), { '#': i + 1}, true);\n                }\n\n                return lines.join('\\n');\n            });\n\n            // var with placeholder: {VAR varname:} placeholder {:VAR}\n            string = string.replace(this.regexp.var2, processVars);\n\n            // var: {VAR varname}\n            string = string.replace(this.regexp.var, processVars);\n\n            // function with placeholder: {FN funcname (...params):} placeholder {:FN}\n            string = string.replace(this.regexp.function2, processFuncs);\n\n            // function: {FN funcname (...params)}\n            string = string.replace(this.regexp.function, processFuncs);\n\n            // tab: {T} or {T2}, {T3}, {T4}...\n            string = string.replace(this.regexp.tab, function (string, number) {\n                if (number) {\n                    return new Array(parseInt(number, 10) + 1).join(self.settings.tab);\n                }\n\n                return self.settings.tab;\n            });\n\n            // line number: {#}\n            string = string.replace(this.regexp.number, function () {\n                return vars['#'] !== undefined ? vars['#'] : 1;\n            });\n\n            // selection with placeholder: {S:} placeholder {:S}\n            string = string.replace(this.regexp.selection2, function (string, placeholder) {\n                return selection.text ? selection.text : placeholder;\n            });\n\n            // selection: {S}\n            string = string.replace(this.regexp.selection, selection.text);\n\n            if (!nocaret) {\n                // caret with selection: {C:} selection {:C}\n                string = string.replace(this.regexp.caret2, function (string, selection, position) {\n                    if (self.selectAfterParsing.start === null) {\n                        self.selectAfterParsing = {\n                            start: position,\n                            len:   selection.length\n                        };\n                    }\n\n                    return selection;\n                });\n\n               // caret: {C}\n                string = string.replace(this.regexp.caret, function (string, position) {\n                    if (self.selectAfterParsing.start === null) {\n                        self.selectAfterParsing = {\n                            start: position,\n                            len: 0\n                        };\n                    }\n\n                    return '';\n                });\n            }\n\n            return string;\n        },\n\n        refreshPreview: function () {\n            var self    = this,\n                content = this.textarea.value;\n\n            if (!this.preview) {\n                return;\n            }\n\n            if (this.settings.beforePreviewRefresh) {\n                this._callback(\n                    this.settings.beforePreviewRefresh,\n                    [\n                        content,\n                        function (content) {\n                            goThroughServerParser(content);\n                        }\n                    ]\n                );\n            } else {\n                goThroughServerParser(content);\n            }\n\n            function goThroughServerParser (content) {\n                var serverPath, postValues;\n\n                if (self.settings.previewServerPath) {\n                    serverPath = self._replaceMarkItUpPath(self.settings.previewServerPath);\n                    postValues = {};\n\n                    postValues.markitup = content;\n\n                    self._ajaxPost(serverPath, postValues, function (parsedContent) {\n                        applyTemplate(parsedContent);\n                    });\n                } else {\n                    applyTemplate(content);\n                }\n            }\n\n            function applyTemplate (content) {\n                var templatePath;\n\n                if (self.preview.tagName === 'IFRAME' && self.settings.previewTemplatePath) {\n\n                    // Is template is cached\n                    if (self.previewTemplateCache) {\n                       doRefreshPreview(content, self.previewTemplateCache);\n\n                    // Load template and cache it\n                    } else {\n                        templatePath = self._replaceMarkItUpPath(self.settings.previewTemplatePath);\n\n                        if (templatePath) {\n                           self._ajaxGet(templatePath, function (template) {\n                               self.previewTemplateCache = self._replaceMarkItUpPath(template);\n\n                               doRefreshPreview(content, self.previewTemplateCache);\n                           });\n                       }\n                   }\n                } else {\n                    doRefreshPreview(content, self.previewTemplateCache);\n                }\n            }\n\n            function doRefreshPreview (content, template) {\n                var iframe;\n\n                // Add content in template\n                if (template) {\n                    content = template.replace(/\\{ *markitup *\\/?\\}/g,  content);\n                }\n\n                // Refresh IFRAME content\n                if (self.preview.tagName === 'IFRAME' && self.preview.contentWindow) {\n                    iframe = self.preview.contentWindow.document;\n                    iframe.open();\n                    iframe.write(content);\n                    iframe.close();\n\n                // Or refresh page element innerHTML\n                } else {\n                    self.preview.innerHTML = content;\n                }\n\n                // afterPreviewRefresh Callback\n                self._callback(self.settings.afterPreviewRefresh, [ content, self.textarea.value ]);\n            }\n        },\n\n        togglePreview: function () {\n            if (this.preview.style.display === 'block') {\n                this.hidePreview();\n            } else {\n                this.showPreview();\n            }\n        },\n\n        showPreview: function () {\n            this.preview.style.display = 'block';\n        },\n\n        hidePreview: function () {\n            this.preview.style.display = 'none';\n        },\n\n        getPreviewContent: function () {\n            if (this.preview.tagName === 'IFRAME') {\n                return this.preview.contentWindow.document.body.innerHTML;\n            } else {\n                return this.preview.textContent;\n            }\n        },\n\n        register: function (Plugin) {\n            var self = this;\n\n            if (typeof Plugin !== 'function' || !Plugin.id) {\n                throw 'Invalid MarkItUp! plugin.';\n            }\n\n            MarkItUp.prototype[Plugin.id] = function () {\n                var args = [ null, self ].concat([].slice.call(arguments));\n\n                return new (Function.prototype.bind.apply(Plugin, args))();\n            }();\n        },\n\n        _replaceMarkItUpPath: function (path) {\n            var markitupPath = this.getMarkItUpPath();\n\n            return path.replace(/markitup:\\/\\//g, markitupPath);\n        },\n\n        _dialog: function (settings, callback) {\n            var self = this,\n                overlay,\n                dialog,\n                html;\n\n            html = '<div class=\"markitup-overlay\"></div>';\n\n            overlay = MarkItUp.utils.fragment(html);\n\n            if (settings.url) {\n                this._ajaxGet(settings.url, function (data) {\n                    settings.body = data;\n\n                    createDialog();\n                });\n            } else {\n                createDialog();\n            }\n\n            function createDialog () {\n                var widget,\n                    body;\n\n                self._callback(self.settings.beforeDialogOpen, [ settings ]);\n                self._callback(settings.beforeOpen, [ settings ]);\n\n                html  = '<div class=\"markitup-dialog\">';\n                html +=     '<form>';\n\n                // Dialog Header\n                if (settings.header) {\n                    html += '<div class=\"markitup-dialog-header\">';\n                    html +=     '<h4>' + settings.header + '</h4>';\n                    html += '</div>';\n                }\n\n                // Dialog body\n                html += '<div class=\"markitup-dialog-body\"></div>';\n\n                // Dialog footer\n                if (settings.cancel !== false || settings.submit !== false) {\n                    html += '<div class=\"markitup-dialog-footer\">';\n                    if (settings.cancel !== false) {\n                        html += '<button type=\"button\" class=\"markitup-dialog-button markitup-dialog-close\">';\n                        html +=     (settings.cancel || 'Cancel');\n                        html += '</button>';\n                    }\n                    if (settings.submit !== false) {\n                        html += '<button type=\"submit\" class=\"markitup-dialog-button markitup-dialog-submit\">';\n                        html +=     (settings.submit || 'Ok');\n                        html += '</button>';\n                    }\n                    html += '</div>';\n                }\n\n                html += '</form>';\n                html += '</div>';\n\n                dialog = MarkItUp.utils.fragment(html);\n                widget = self._funcOrArg(settings.widget);\n                body   = dialog.querySelector('.markitup-dialog-body');\n\n                if (typeof widget === 'object' && widget.nodeType === 1) {\n                    body.appendChild(widget);\n                } else {\n                    body.innerHTML = settings.body;\n                }\n\n                if (settings.width) {\n                    dialog.style.width = settings.width + 'px';\n                }\n\n                if (settings.height) {\n                    dialog.style.height = settings.height + 'px';\n                }\n\n                dialog.settings = settings;\n\n                dialog.querySelector('form').addEventListener('submit', function (e) {\n                    var vars   = {},\n                        inputs = dialog.querySelectorAll('input[name]');\n\n                    e.preventDefault();\n\n                    [].forEach.call(inputs, function (elmt) {\n                        if (elmt.type === 'checkbox' || elmt.type === 'radio') {\n                            if (elmt.checked) {\n                                vars[elmt.name] = elmt.value;\n                            }\n                        } else {\n                            vars[elmt.name] = elmt.value;\n                        }\n                    });\n\n                    if (typeof callback === 'function') {\n                        callback.apply(self, [ vars ]);\n                    }\n\n                    self.closeDialog();\n                });\n\n                if (settings.cancel !== false) {\n                    dialog.querySelector('.markitup-dialog-close').addEventListener(click, function (e) {\n                        self.closeDialog();\n\n                        e.stopPropagation();\n                    });\n                }\n\n                dialog.addEventListener('keydown', function (e) {\n                    if (e.which === 27) {\n                        self.closeDialog();\n                    }\n\n                    e.stopPropagation();\n                });\n\n                dialog.addEventListener(click, function (e) {\n                    e.stopPropagation();\n                });\n\n                overlay.addEventListener(click, function (e) {\n                    self.closeDialog();\n\n                    e.stopPropagation();\n                });\n\n                document.body\n                    .appendChild(overlay)\n                    .appendChild(dialog);\n\n                setTimeout(function () {\n                    MarkItUp.utils.addClass(overlay, 'markitup-transition');\n                    MarkItUp.utils.addClass(dialog, 'markitup-transition');\n                }, 10);\n\n                var firstField = dialog.querySelector('[name]');\n\n                if (firstField) {\n                    dialog.querySelector('[name]').focus();\n                }\n\n                self.dialog  = dialog;\n                self.overlay = overlay;\n\n                self._callback(self.settings.afterDialogOpen, [ settings, dialog, overlay ]);\n                self._callback(settings.afterOpen, [ settings, dialog, overlay ]);\n            }\n        },\n\n        closeDialog: function () {\n            var overlay = this.overlay,\n                dialog  = this.dialog;\n\n            if (!dialog) {\n                return;\n            }\n\n            this._callback(this.settings.beforeDialogClose, [ dialog.settings, dialog, overlay ]);\n            this._callback(dialog.settings.beforeClose, [ dialog.settings, dialog, overlay ]);\n\n            overlay.remove();\n            dialog.remove();\n\n            this.textarea.focus();\n\n            this.dialog  = null;\n            this.overlay = null;\n\n            this._callback(this.settings.afterDialogClose, [ dialog.settings ]);\n            this._callback(dialog.settings.afterClose, [ dialog.settings ]);\n        },\n\n        destroy: function () {\n            var container = this.container,\n                textarea  = this.textarea,\n                dialog    = this.dialog,\n                overlay   = this.overlay;\n\n            if (!container || !textarea) {\n                return;\n            }\n\n            this.texarea   = null;\n            this.container = null;\n            this.preview   = null;\n            this.dialog    = null;\n            this.overlay   = null;\n\n            textarea.className = textarea.className.replace('markitup-textarea', '');\n            container.parentNode.insertBefore(textarea, container.nextSibling);\n            container.parentNode.removeChild(container);\n\n            if (dialog) {\n                dialog.parentNode.removeChild(dialog);\n                overlay.parentNode.removeChild(overlay);\n            }\n\n            textarea.removeEventListener('keydown', this.boundKeyDownEvent);\n            textarea.removeEventListener(click,     this._resetTabJump);\n\n            document.body.removeEventListener(click, MarkItUp.utils.closeDropdowns);\n        },\n\n        closeDropdowns: function () {\n            MarkItUp.utils.closeDropdowns();\n        },\n\n        _ajaxGet: function (url, callback) {\n            var request = new XMLHttpRequest ();\n\n            url = this._replaceMarkItUpPath(url);\n\n            request.open('GET', url, true);\n\n            request.onload = function () {\n                if (request.status >= 200 && request.status < 400) {\n                    callback.apply(this, [ request.responseText ]);\n                }\n            };\n\n            request.send();\n        },\n\n        _ajaxPost: function (url, data, callback) {\n            var request = new XMLHttpRequest ();\n\n            url = this._replaceMarkItUpPath(url);\n\n            request.open('POST', url, true);\n            request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');\n\n            request.onload = function () {\n                if (request.status >= 200 && request.status < 400) {\n                    callback.apply(this, [ request.responseText ]);\n                }\n            };\n\n            request.send(MarkItUp.utils.queryString(data));\n        },\n\n        _multiline: function (content, callback) {\n            var line,\n                lines    = [],\n                selected = content.replace(/\\r?\\n$/, '').split(/\\r?\\n/);\n\n            for (var i = 0; i < selected.length; i++) {\n                line = callback(selected[i], i);\n                line = line.replace(this.regexp.number, i + 1);\n                lines.push(line);\n            }\n\n            return lines.join('\\n');\n        },\n\n        _removeTabsAtBeggining: function (content) {\n            return content.replace(new RegExp('^' + this.tabs()), '');\n        },\n\n        _funcOrArg: function (value) {\n            if (typeof value === 'function') {\n                return value.apply(this);\n            }\n\n            return value;\n        },\n\n        _resetTabJump: function () {\n            this.tabJump = null;\n        },\n\n        _click: function (elmt, setting) {\n            var self = this;\n            var selection = self.getSelection();\n\n            function insertion (e) {\n                e.preventDefault();\n\n                setting.event = e;\n\n                if (!setting.dropdown) {\n                    MarkItUp.utils.closeDropdowns();\n                }\n\n                self._callback(setting.click, [ setting ]);\n                self.do(setting);\n            }\n\n            if (setting.shortcut) {\n                this._registerShortcut(setting.shortcut, insertion);\n            }\n\n            elmt.addEventListener(click, insertion);\n        },\n\n        _callback: function (fn, args) {\n            if (typeof fn === 'function') {\n                return fn.apply(this, args);\n            }\n        },\n\n        _triggerEvent: function (type) {\n            type = type || 'insertion';\n\n            var event = document.createEvent(\"Event\");\n\n            event.initEvent(type, false, false);\n\n            this.textarea.dispatchEvent(event);\n        },\n\n        _command: function () {\n            var position = this.getPosition(),\n                content  = this.textarea.value.substring(0, position),\n                matches  = content.match(/\\w+$/),\n                command;\n\n            if (matches) {\n                command = matches[0];\n\n                if (this.settings.commands[command]) {\n                    var string = this.settings.commands[command].apply(this);\n\n                    this.setSelection(position - command.length, command.length);\n                    this.insert(string, { select: 0 });\n\n                    return true;\n                }\n            }\n        }\n    };\n\n    MarkItUp.prototype.utils = MarkItUp.utils = {\n        getPath: function () {\n            var scripts = document.getElementsByTagName('script'),\n                len = scripts.length,\n                path;\n\n            for (var i = 0; i < len; i++) {\n                var matches = scripts[i].src.match(/(.*)markitup(\\.min)?\\.js$/);\n\n                if (matches) {\n                    path = matches[1];\n                    break;\n                }\n            }\n\n            return path;\n        },\n\n        extend: function (obj1, obj2) {\n            if (!obj1) {\n                obj1 = {};\n            }\n\n            if (!obj2) {\n                obj2 = {};\n            }\n\n            for (var key in obj1) {\n                if (typeof obj2[key] === 'undefined') {\n                    obj2[key] = obj1[key];\n                }\n            }\n\n            return obj2;\n        },\n\n        closeDropdowns: function () {\n            var dropdowns = document.querySelectorAll('.markitup-open');\n\n            [].forEach.call(dropdowns, function (elmt) {\n                setTimeout(function () {\n                    MarkItUp.utils.removeClass(elmt, 'markitup-open');\n                }, 10);\n            });\n        },\n\n        escapeREChars: function (string) {\n            return ('' + string).replace(/[:.?*+^$[\\]\\\\(){}|-]/g, \"\\\\$&\");\n        },\n\n        classRE: function (className) {\n            return new RegExp('(^|\\\\s+)' + className + '(\\\\s+|$)');\n        },\n\n        hasClass: function (elmt, className) {\n            return MarkItUp.utils.classRE(className).test(elmt.className);\n        },\n\n        addClass: function (elmt, className) {\n            if (!MarkItUp.utils.hasClass(elmt, className) ) {\n                elmt.className = elmt.className + ' ' + className;\n            }\n        },\n\n        removeClass: function (elmt, className) {\n            elmt.className = elmt.className.replace(MarkItUp.utils.classRE(className), '');\n        },\n\n        queryString: function (data) {\n            return Object.keys(data).map(function(key) {\n                return encodeURIComponent(key) + '=' + encodeURIComponent(data[key]);\n            }).join('&');\n        },\n\n        fragment: function (html) {\n            var container,\n                tag   = html.match(/^\\s*<(\\w+|!)[^>]*>/)[1],\n                div   = document.createElement('div'),\n                table = document.createElement('table'),\n                tbody = document.createElement('tbody'),\n                tr    = document.createElement('tr'),\n                containers = {\n                    'thead': table,\n                    'tbody': table,\n                    'tfoot': table,\n                    'tr': tbody,\n                    'td': tr,\n                    'th': tr\n                };\n\n            if (containers[tag]) {\n                container = containers[tag];\n            } else {\n                container = div;\n            }\n\n            container.innerHTML = html;\n\n            return container.childNodes[0];\n        }\n    };\n\n    MarkItUp.plugins = {};\n\n    MarkItUp.register = function (Plugin) {\n        MarkItUp.plugins[Plugin.id] = Plugin;\n    };\n\n    MarkItUp.icons = {\n        \"align-center\": \"<svg width=\\\"1792\\\" height=\\\"1792\\\" viewBox=\\\"0 0 1792 1792\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M1792 1344v128q0 26-19 45t-45 19H64q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm-384-384v128q0 26-19 45t-45 19H448q-26 0-45-19t-19-45V960q0-26 19-45t45-19h896q26 0 45 19t19 45zm256-384v128q0 26-19 45t-45 19H192q-26 0-45-19t-19-45V576q0-26 19-45t45-19h1408q26 0 45 19t19 45zm-384-384v128q0 26-19 45t-45 19H576q-26 0-45-19t-19-45V192q0-26 19-45t45-19h640q26 0 45 19t19 45z\\\"/></svg>\",\n        \"align-justify\": \"<svg width=\\\"1792\\\" height=\\\"1792\\\" viewBox=\\\"0 0 1792 1792\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M1792 1344v128q0 26-19 45t-45 19H64q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19H64q-26 0-45-19t-19-45V960q0-26 19-45t45-19h1664q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19H64q-26 0-45-19T0 704V576q0-26 19-45t45-19h1664q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19H64q-26 0-45-19T0 320V192q0-26 19-45t45-19h1664q26 0 45 19t19 45z\\\"/></svg>\",\n        \"align-left\": \"<svg width=\\\"1792\\\" height=\\\"1792\\\" viewBox=\\\"0 0 1792 1792\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M1792 1344v128q0 26-19 45t-45 19H64q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm-384-384v128q0 26-19 45t-45 19H64q-26 0-45-19t-19-45V960q0-26 19-45t45-19h1280q26 0 45 19t19 45zm256-384v128q0 26-19 45t-45 19H64q-26 0-45-19T0 704V576q0-26 19-45t45-19h1536q26 0 45 19t19 45zm-384-384v128q0 26-19 45t-45 19H64q-26 0-45-19T0 320V192q0-26 19-45t45-19h1152q26 0 45 19t19 45z\\\"/></svg>\",\n        \"align-right\": \"<svg width=\\\"1792\\\" height=\\\"1792\\\" viewBox=\\\"0 0 1792 1792\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M1792 1344v128q0 26-19 45t-45 19H64q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1664q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19H448q-26 0-45-19t-19-45V960q0-26 19-45t45-19h1280q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19H192q-26 0-45-19t-19-45V576q0-26 19-45t45-19h1536q26 0 45 19t19 45zm0-384v128q0 26-19 45t-45 19H576q-26 0-45-19t-19-45V192q0-26 19-45t45-19h1152q26 0 45 19t19 45z\\\"/></svg>\",\n        \"anchor\": \"<svg width=\\\"1792\\\" height=\\\"1792\\\" viewBox=\\\"0 0 1792 1792\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M960 256q0-26-19-45t-45-19-45 19-19 45 19 45 45 19 45-19 19-45zm832 928v352q0 22-20 30-8 2-12 2-13 0-23-9l-93-93q-119 143-318.5 226.5T896 1776t-429.5-83.5T148 1466l-93 93q-9 9-23 9-4 0-12-2-20-8-20-30v-352q0-14 9-23t23-9h352q22 0 30 20 8 19-7 35l-100 100q67 91 189.5 153.5T768 1543V896H576q-26 0-45-19t-19-45V704q0-26 19-45t45-19h192V477q-58-34-93-92.5T640 256q0-106 75-181T896 0t181 75 75 181q0 70-35 128.5t-93 92.5v163h192q26 0 45 19t19 45v128q0 26-19 45t-45 19h-192v647q149-20 271.5-82.5T1485 1307l-100-100q-15-16-7-35 8-20 30-20h352q14 0 23 9t9 23z\\\"/></svg>\",\n        \"bold\": \"<svg width=\\\"1792\\\" height=\\\"1792\\\" viewBox=\\\"0 0 1792 1792\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M747 1521q74 32 140 32 376 0 376-335 0-114-41-180-27-44-61.5-74t-67.5-46.5-80.5-25-84-10.5-94.5-2q-73 0-101 10 0 53-.5 159t-.5 158q0 8-1 67.5t-.5 96.5 4.5 83.5 12 66.5zm-14-746q42 7 109 7 82 0 143-13t110-44.5 74.5-89.5 25.5-142q0-70-29-122.5t-79-82T979 245t-124-14q-50 0-130 13 0 50 4 151t4 152q0 27-.5 80t-.5 79q0 46 1 69zm-541 889l2-94q15-4 85-16t106-27q7-12 12.5-27t8.5-33.5 5.5-32.5 3-37.5.5-34V1297q0-982-22-1025-4-8-22-14.5t-44.5-11-49.5-7-48.5-4.5-30.5-3l-4-83q98-2 340-11.5t373-9.5q23 0 68.5.5t67.5.5q70 0 136.5 13t128.5 42 108 71 74 104.5 28 137.5q0 52-16.5 95.5t-39 72T1398 722t-73 45-84 40q154 35 256.5 134t102.5 248q0 100-35 179.5t-93.5 130.5-138 85.5T1170 1633t-176 14q-44 0-132-3t-132-3q-106 0-307 11t-231 12z\\\"/></svg>\",\n        \"bolt\": \"<svg width=\\\"1792\\\" height=\\\"1792\\\" viewBox=\\\"0 0 1792 1792\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M1333 566q18 20 7 44L800 1767q-13 25-42 25-4 0-14-2-17-5-25.5-19t-4.5-30l197-808-406 101q-4 1-12 1-18 0-31-11-18-15-13-39l201-825q4-14 16-23t28-9h328q19 0 32 12.5t13 29.5q0 8-5 18L891 651l396-98q8-2 12-2 19 0 34 15z\\\"/></svg>\",\n        \"char\": \"<svg width=\\\"1792\\\" height=\\\"1792\\\" viewBox=\\\"0 0 1792 1792\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M1362 1185q0 153-99.5 263.5T1004 1585v175q0 14-9 23t-23 9H837q-13 0-22.5-9.5T805 1760v-175q-66-9-127.5-31T576 1509.5t-74-48-46.5-37.5-17.5-18q-17-21-2-41l103-135q7-10 23-12 15-2 24 9l2 2q113 99 243 125 37 8 74 8 81 0 142.5-43t61.5-122q0-28-15-53t-33.5-42-58.5-37.5-66-32-80-32.5q-39-16-61.5-25T733 948.5t-62.5-31T614 882t-53.5-42.5-43.5-49-35.5-58-21-66.5-8.5-78q0-138 98-242t255-134V32q0-13 9.5-22.5T837 0h135q14 0 23 9t9 23v176q57 6 110.5 23t87 33.5T1265 302t39 29 15 14q17 18 5 38l-81 146q-8 15-23 16-14 3-27-7-3-3-14.5-12t-39-26.5-58.5-32-74.5-26T921 430q-95 0-155 43t-60 111q0 26 8.5 48t29.5 41.5 39.5 33 56 31 60.5 27 70 27.5q53 20 81 31.5t76 35 75.5 42.5 62 50 53 63.5 31.5 76.5 13 94z\\\"/></svg>\",\n        \"check\": \"<svg width=\\\"1792\\\" height=\\\"1792\\\" viewBox=\\\"0 0 1792 1792\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M1671 566q0 40-28 68l-724 724-136 136q-28 28-68 28t-68-28l-136-136-362-362q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 295 656-657q28-28 68-28t68 28l136 136q28 28 28 68z\\\"/></svg>\",\n        \"code\": \"<svg width=\\\"1792\\\" height=\\\"1792\\\" viewBox=\\\"0 0 1792 1792\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M553 1399l-50 50q-10 10-23 10t-23-10L-9 983q-10-10-10-23t10-23l466-466q10-10 23-10t23 10l50 50q10 10 10 23t-10 23L160 960l393 393q10 10 10 23t-10 23zm591-1067L771 1623q-4 13-15.5 19.5T732 1645l-62-17q-13-4-19.5-15.5T648 1588l373-1291q4-13 15.5-19.5t23.5-2.5l62 17q13 4 19.5 15.5t2.5 24.5zm657 651l-466 466q-10 10-23 10t-23-10l-50-50q-10-10-10-23t10-23l393-393-393-393q-10-10-10-23t10-23l50-50q10-10 23-10t23 10l466 466q10 10 10 23t-10 23z\\\"/></svg>\",\n        \"cogs\": \"<svg width=\\\"1792\\\" height=\\\"1792\\\" viewBox=\\\"0 0 1792 1792\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M832 896q0-106-75-181t-181-75-181 75-75 181 75 181 181 75 181-75 75-181zm768 512q0-52-38-90t-90-38-90 38-38 90q0 53 37.5 90.5t90.5 37.5 90.5-37.5 37.5-90.5zm0-1024q0-52-38-90t-90-38-90 38-38 90q0 53 37.5 90.5T1472 512t90.5-37.5T1600 384zm-384 421v185q0 10-7 19.5t-16 10.5l-155 24q-11 35-32 76 34 48 90 115 7 10 7 20 0 12-7 19-23 30-82.5 89.5T935 1423q-11 0-21-7l-115-90q-37 19-77 31-11 108-23 155-7 24-30 24H483q-11 0-20-7.5t-10-17.5l-23-153q-34-10-75-31l-118 89q-7 7-20 7-11 0-21-8-144-133-144-160 0-9 7-19 10-14 41-53t47-61q-23-44-35-82l-152-24q-10-1-17-9.5t-7-19.5V802q0-10 7-19.5t16-10.5l155-24q11-35 32-76-34-48-90-115-7-11-7-20 0-12 7-20 22-30 82-89t79-59q11 0 21 7l115 90q34-18 77-32 11-108 23-154 7-24 30-24h186q11 0 20 7.5t10 17.5l23 153q34 10 75 31l118-89q8-7 20-7 11 0 21 8 144 133 144 160 0 9-7 19-12 16-42 54t-45 60q23 48 34 82l152 23q10 2 17 10.5t7 19.5zm640 533v140q0 16-149 31-12 27-30 52 51 113 51 138 0 4-4 7-122 71-124 71-8 0-46-47t-52-68q-20 2-30 2t-30-2q-14 21-52 68t-46 47q-2 0-124-71-4-3-4-7 0-25 51-138-18-25-30-52-149-15-149-31v-140q0-16 149-31 13-29 30-52-51-113-51-138 0-4 4-7 4-2 35-20t59-34 30-16q8 0 46 46.5t52 67.5q20-2 30-2t30 2q51-71 92-112l6-2q4 0 124 70 4 3 4 7 0 25-51 138 17 23 30 52 149 15 149 31zm0-1024v140q0 16-149 31-12 27-30 52 51 113 51 138 0 4-4 7-122 71-124 71-8 0-46-47t-52-68q-20 2-30 2t-30-2q-14 21-52 68t-46 47q-2 0-124-71-4-3-4-7 0-25 51-138-18-25-30-52-149-15-149-31V314q0-16 149-31 13-29 30-52-51-113-51-138 0-4 4-7 4-2 35-20t59-34 30-16q8 0 46 46.5t52 67.5q20-2 30-2t30 2q51-71 92-112l6-2q4 0 124 70 4 3 4 7 0 25-51 138 17 23 30 52 149 15 149 31z\\\"/></svg>\",\n        \"color\": \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"216\\\" height=\\\"146\\\" viewBox=\\\"0 0 216 146\\\"><path d=\\\"M143.113 68.845c-.326-.489-2.024-2.946-5.092-7.373-3.069-4.427-5.812-8.528-8.229-12.303s-5.118-8.609-8.106-14.502c-2.987-5.893-5.242-11.366-6.762-16.417-.435-1.629-1.344-2.906-2.73-3.829-1.383-.923-2.782-1.385-4.194-1.385s-2.797.462-4.155 1.385-2.281 2.2-2.77 3.829c-1.521 5.051-3.775 10.524-6.762 16.417s-5.689 10.727-8.106 14.502-5.16 7.876-8.229 12.303c-3.069 4.427-4.766 6.884-5.092 7.373-4.399 7.062-6.599 14.53-6.599 22.405 0 11.516 4.074 21.346 12.221 29.493S96.485 132.965 108 132.965c11.514 0 21.346-4.074 29.493-12.222s12.222-17.978 12.222-29.493c0-8.039-2.201-15.507-6.602-22.405zm-38.168 40.207c-2.038 2.037-4.495 3.056-7.374 3.056-2.878 0-5.336-1.019-7.373-3.056-2.037-2.036-3.056-4.495-3.056-7.373 0-1.956.544-3.829 1.63-5.622.055-.055.475-.664 1.263-1.832s1.48-2.201 2.078-3.097c.598-.897 1.277-2.091 2.037-3.585.76-1.494 1.331-2.865 1.711-4.113.217-.869.788-1.305 1.711-1.305s1.494.436 1.711 1.305c.38 1.248.951 2.619 1.711 4.113.76 1.494 1.439 2.689 2.037 3.585.597.896 1.289 1.929 2.077 3.097.787 1.168 1.208 1.777 1.263 1.832 1.086 1.793 1.629 3.666 1.629 5.622 0 2.878-1.019 5.337-3.055 7.373z\\\"/></svg>\",\n        \"cross\": \"<svg width=\\\"1792\\\" height=\\\"1792\\\" viewBox=\\\"0 0 1792 1792\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M1490 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z\\\"/></svg>\",\n        \"file\": \"<svg width=\\\"1792\\\" height=\\\"1792\\\" viewBox=\\\"0 0 1792 1792\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M1152 512V40q22 14 36 28l408 408q14 14 28 36h-472zm-128 32q0 40 28 68t68 28h544v1056q0 40-28 68t-68 28H224q-40 0-68-28t-28-68V96q0-40 28-68t68-28h800v544z\\\"/></svg>\",\n        \"font\": \"<svg width=\\\"1792\\\" height=\\\"1792\\\" viewBox=\\\"0 0 1792 1792\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M789 559l-170 450q33 0 136.5 2t160.5 2q19 0 57-2-87-253-184-452zM64 1664l2-79q23-7 56-12.5t57-10.5 49.5-14.5 44.5-29 31-50.5l237-616 280-724h128q8 14 11 21l205 480q33 78 106 257.5t114 274.5q15 34 58 144.5t72 168.5q20 45 35 57 19 15 88 29.5t84 20.5q6 38 6 57 0 4-.5 13t-.5 13q-63 0-190-8t-191-8q-76 0-215 7t-178 8q0-43 4-78l131-28q1 0 12.5-2.5t15.5-3.5 14.5-4.5 15-6.5 11-8 9-11 2.5-14q0-16-31-96.5t-72-177.5-42-100l-450-2q-26 58-76.5 195.5T446 1489q0 22 14 37.5t43.5 24.5 48.5 13.5 57 8.5 41 4q1 19 1 58 0 9-2 27-58 0-174.5-10T300 1642q-8 0-26.5 4t-21.5 4q-80 14-188 14z\\\"/></svg>\",\n        \"header\": \"<svg width=\\\"1792\\\" height=\\\"1792\\\" viewBox=\\\"0 0 1792 1792\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M1682 1664q-44 0-132.5-3.5T1416 1657q-44 0-132 3.5t-132 3.5q-24 0-37-20.5t-13-45.5q0-31 17-46t39-17 51-7 45-15q33-21 33-140l-1-391q0-21-1-31-13-4-50-4H560q-38 0-51 4-1 10-1 31l-1 371q0 142 37 164 16 10 48 13t57 3.5 45 15 20 45.5q0 26-12.5 48t-36.5 22q-47 0-139.5-3.5T387 1657q-43 0-128 3.5t-127 3.5q-23 0-35.5-21T84 1598q0-30 15.5-45t36-17.5 47.5-7.5 42-15q33-23 33-143l-1-57V500q0-3 .5-26t0-36.5T256 399t-3.5-42-6.5-36.5-11-31.5-16-18q-15-10-45-12t-53-2-41-14-18-45q0-26 12-48t36-22q46 0 138.5 3.5T387 135q42 0 126.5-3.5T640 128q25 0 37.5 22t12.5 48q0 30-17 43.5T634.5 256t-49.5 4-43 13q-35 21-35 160l1 320q0 21 1 32 13 3 39 3h699q25 0 38-3 1-11 1-32l1-320q0-139-35-160-18-11-58.5-12.5t-66-13T1102 198q0-26 12.5-48t37.5-22q44 0 132 3.5t132 3.5q43 0 129-3.5t129-3.5q25 0 37.5 22t12.5 48q0 30-17.5 44t-40 14.5-51.5 3-44 12.5q-35 23-35 161l1 943q0 119 34 140 16 10 46 13.5t53.5 4.5 41.5 15.5 18 44.5q0 26-12 48t-36 22z\\\"/></svg>\",\n        \"indent\": \"<svg width=\\\"1792\\\" height=\\\"1792\\\" viewBox=\\\"0 0 1792 1792\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M352 832q0 14-9 23L55 1143q-9 9-23 9-13 0-22.5-9.5T0 1120V544q0-13 9.5-22.5T32 512q14 0 23 9l288 288q9 9 9 23zm1440 480v192q0 13-9.5 22.5t-22.5 9.5H32q-13 0-22.5-9.5T0 1504v-192q0-13 9.5-22.5T32 1280h1728q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5H672q-13 0-22.5-9.5T640 1120V928q0-13 9.5-22.5T672 896h1088q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5T1760 768H672q-13 0-22.5-9.5T640 736V544q0-13 9.5-22.5T672 512h1088q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5T1760 384H32q-13 0-22.5-9.5T0 352V160q0-13 9.5-22.5T32 128h1728q13 0 22.5 9.5t9.5 22.5z\\\"/></svg>\",\n        \"italic\": \"<svg width=\\\"1792\\\" height=\\\"1792\\\" viewBox=\\\"0 0 1792 1792\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M384 1662l17-85q6-2 81.5-21.5T594 1518q28-35 41-101 1-7 62-289t114-543.5T863 288v-25q-24-13-54.5-18.5t-69.5-8-58-5.5l19-103q33 2 120 6.5t149.5 7T1090 144q48 0 98.5-2.5t121-7 98.5-6.5q-5 39-19 89-30 10-101.5 28.5T1179 279q-8 19-14 42.5t-9 40-7.5 45.5-6.5 42q-27 148-87.5 419.5T977 1224q-2 9-13 58t-20 90-16 83.5-6 57.5l1 18q17 4 185 31-3 44-16 99-11 0-32.5 1.5t-32.5 1.5q-29 0-87-10t-86-10q-138-2-206-2-51 0-143 9t-121 11z\\\"/></svg>\",\n        \"link\": \"<svg width=\\\"1792\\\" height=\\\"1792\\\" viewBox=\\\"0 0 1792 1792\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zM817 511q0-40-28-68L583 236q-28-28-68-28-39 0-68 27L300 381q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5T607.5 680t-15-19-13-25.5T576 608q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84L164 652q-84-84-84-204t85-203L312 99q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z\\\"/></svg>\",\n        \"list-ol\": \"<svg width=\\\"1792\\\" height=\\\"1792\\\" viewBox=\\\"0 0 1792 1792\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M381 1620q0 80-54.5 126T191 1792q-106 0-172-66l57-88q49 45 106 45 29 0 50.5-14.5T254 1626q0-64-105-56l-26-56q8-10 32.5-43.5t42.5-54 37-38.5v-1q-16 0-48.5 1t-48.5 1v53H32v-152h333v88l-95 115q51 12 81 49t30 88zm2-627v159H21q-6-36-6-54 0-51 23.5-93T95 937t66-47.5 56.5-43.5 23.5-45q0-25-14.5-38.5T187 749q-46 0-81 58l-85-59q24-51 71.5-79.5T198 640q73 0 123 41.5T371 794q0 50-34 91.5T262 950t-75.5 50.5T151 1053h127v-60h105zm1409 319v192q0 13-9.5 22.5t-22.5 9.5H544q-13 0-22.5-9.5T512 1504v-192q0-14 9-23t23-9h1216q13 0 22.5 9.5t9.5 22.5zM384 413v99H49v-99h107q0-41 .5-122t.5-121v-12h-2q-8 17-50 54l-71-76L170 9h106v404h108zm1408 387v192q0 13-9.5 22.5t-22.5 9.5H544q-13 0-22.5-9.5T512 992V800q0-14 9-23t23-9h1216q13 0 22.5 9.5t9.5 22.5zm0-512v192q0 13-9.5 22.5T1760 512H544q-13 0-22.5-9.5T512 480V288q0-13 9.5-22.5T544 256h1216q13 0 22.5 9.5t9.5 22.5z\\\"/></svg>\",\n        \"list-ul\": \"<svg width=\\\"1792\\\" height=\\\"1792\\\" viewBox=\\\"0 0 1792 1792\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M384 1408q0 80-56 136t-136 56-136-56-56-136 56-136 136-56 136 56 56 136zm0-512q0 80-56 136t-136 56-136-56T0 896t56-136 136-56 136 56 56 136zm1408 416v192q0 13-9.5 22.5t-22.5 9.5H544q-13 0-22.5-9.5T512 1504v-192q0-13 9.5-22.5t22.5-9.5h1216q13 0 22.5 9.5t9.5 22.5zM384 384q0 80-56 136t-136 56-136-56T0 384t56-136 136-56 136 56 56 136zm1408 416v192q0 13-9.5 22.5t-22.5 9.5H544q-13 0-22.5-9.5T512 992V800q0-13 9.5-22.5T544 768h1216q13 0 22.5 9.5t9.5 22.5zm0-512v192q0 13-9.5 22.5T1760 512H544q-13 0-22.5-9.5T512 480V288q0-13 9.5-22.5T544 256h1216q13 0 22.5 9.5t9.5 22.5z\\\"/></svg>\",\n        \"magic\": \"<svg width=\\\"1792\\\" height=\\\"1792\\\" viewBox=\\\"0 0 1792 1792\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M1254 581l293-293-107-107-293 293zm447-293q0 27-18 45L397 1619q-18 18-45 18t-45-18l-198-198q-18-18-18-45t18-45L1395 45q18-18 45-18t45 18l198 198q18 18 18 45zM350 98l98 30-98 30-30 98-30-98-98-30 98-30 30-98zm350 162l196 60-196 60-60 196-60-196-196-60 196-60 60-196zm930 478l98 30-98 30-30 98-30-98-98-30 98-30 30-98zM990 98l98 30-98 30-30 98-30-98-98-30 98-30 30-98z\\\"/></svg>\",\n        \"outdent\": \"<svg width=\\\"1792\\\" height=\\\"1792\\\" viewBox=\\\"0 0 1792 1792\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M384 544v576q0 13-9.5 22.5T352 1152q-14 0-23-9L41 855q-9-9-9-23t9-23l288-288q9-9 23-9 13 0 22.5 9.5T384 544zm1408 768v192q0 13-9.5 22.5t-22.5 9.5H32q-13 0-22.5-9.5T0 1504v-192q0-13 9.5-22.5T32 1280h1728q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5t-22.5 9.5H672q-13 0-22.5-9.5T640 1120V928q0-13 9.5-22.5T672 896h1088q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5T1760 768H672q-13 0-22.5-9.5T640 736V544q0-13 9.5-22.5T672 512h1088q13 0 22.5 9.5t9.5 22.5zm0-384v192q0 13-9.5 22.5T1760 384H32q-13 0-22.5-9.5T0 352V160q0-13 9.5-22.5T32 128h1728q13 0 22.5 9.5t9.5 22.5z\\\"/></svg>\",\n        \"paragraph\": \"<svg width=\\\"1792\\\" height=\\\"1792\\\" viewBox=\\\"0 0 1792 1792\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M1534 189v73q0 29-18.5 61t-42.5 32q-50 0-54 1-26 6-32 31-3 11-3 64v1152q0 25-18 43t-43 18h-108q-25 0-43-18t-18-43V385h-143v1218q0 25-17.5 43t-43.5 18H842q-26 0-43.5-18t-17.5-43v-496q-147-12-245-59-126-58-192-179-64-117-64-259 0-166 88-286 88-118 209-159 111-37 417-37h479q25 0 43 18t18 43z\\\"/></svg>\",\n        \"picture\": \"<svg width=\\\"1792\\\" height=\\\"1792\\\" viewBox=\\\"0 0 1792 1792\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M576 576q0 80-56 136t-136 56-136-56-56-136 56-136 136-56 136 56 56 136zm1024 384v448H192v-192l320-320 160 160 512-512zm96-704H96q-13 0-22.5 9.5T64 288v1216q0 13 9.5 22.5T96 1536h1600q13 0 22.5-9.5t9.5-22.5V288q0-13-9.5-22.5T1696 256zm160 32v1216q0 66-47 113t-113 47H96q-66 0-113-47t-47-113V288q0-66 47-113t113-47h1600q66 0 113 47t47 113z\\\"/></svg>\",\n        \"preview\": \"<svg width=\\\"1792\\\" height=\\\"1792\\\" viewBox=\\\"0 0 1792 1792\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M1664 960q-152-236-381-353 61 104 61 225 0 185-131.5 316.5T896 1280t-316.5-131.5T448 832q0-121 61-225-229 117-381 353 133 205 333.5 326.5T896 1408t434.5-121.5T1664 960zM944 576q0-20-14-34t-34-14q-125 0-214.5 89.5T592 832q0 20 14 34t34 14 34-14 14-34q0-86 61-147t147-61q20 0 34-14t14-34zm848 384q0 34-20 69-140 230-376.5 368.5T896 1536t-499.5-139T20 1029Q0 994 0 960t20-69q140-229 376.5-368T896 384t499.5 139T1772 891q20 35 20 69z\\\"/></svg>\",\n        \"quote\": \"<svg width=\\\"1792\\\" height=\\\"1792\\\" viewBox=\\\"0 0 1792 1792\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M832 960v384q0 80-56 136t-136 56H256q-80 0-136-56t-56-136V640q0-104 40.5-198.5T214 278t163.5-109.5T576 128h64q26 0 45 19t19 45v128q0 26-19 45t-45 19h-64q-106 0-181 75t-75 181v32q0 40 28 68t68 28h224q80 0 136 56t56 136zm896 0v384q0 80-56 136t-136 56h-384q-80 0-136-56t-56-136V640q0-104 40.5-198.5T1110 278t163.5-109.5T1472 128h64q26 0 45 19t19 45v128q0 26-19 45t-45 19h-64q-106 0-181 75t-75 181v32q0 40 28 68t68 28h224q80 0 136 56t56 136z\\\"/></svg>\",\n        \"smiley\": \"<svg width=\\\"1792\\\" height=\\\"1792\\\" viewBox=\\\"0 0 1792 1792\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M1262 1075q-37 121-138 195t-228 74-228-74-138-195q-8-25 4-48.5t38-31.5q25-8 48.5 4t31.5 38q25 80 92.5 129.5T896 1216t151.5-49.5T1140 1037q8-26 32-38t49-4 37 31.5 4 48.5zM768 640q0 53-37.5 90.5T640 768t-90.5-37.5T512 640t37.5-90.5T640 512t90.5 37.5T768 640zm512 0q0 53-37.5 90.5T1152 768t-90.5-37.5T1024 640t37.5-90.5T1152 512t90.5 37.5T1280 640zm256 256q0-130-51-248.5t-136.5-204-204-136.5T896 256t-248.5 51-204 136.5-136.5 204T256 896t51 248.5 136.5 204 204 136.5 248.5 51 248.5-51 204-136.5 136.5-204 51-248.5zm128 0q0 209-103 385.5T1281.5 1561 896 1664t-385.5-103T231 1281.5 128 896t103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z\\\"/></svg>\",\n        \"strikethrough\": \"<svg width=\\\"1792\\\" height=\\\"1792\\\" viewBox=\\\"0 0 1792 1792\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M1760 896q14 0 23 9t9 23v64q0 14-9 23t-23 9H32q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h1728zM483 832q-28-35-51-80-48-97-48-188 0-181 134-309 133-127 393-127 50 0 167 19 66 12 177 48 10 38 21 118 14 123 14 183 0 18-5 45l-12 3-84-6-14-2q-50-149-103-205-88-91-210-91-114 0-182 59-67 58-67 146 0 73 66 140t279 129q69 20 173 66 58 28 95 52H483zm507 256h411q7 39 7 92 0 111-41 212-23 55-71 104-37 35-109 81-80 48-153 66-80 21-203 21-114 0-195-23l-140-40q-57-16-72-28-8-8-8-22v-13q0-108-2-156-1-30 0-68l2-37v-44l102-2q15 34 30 71t22.5 56 12.5 27q35 57 80 94 43 36 105 57 59 22 132 22 64 0 139-27 77-26 122-86 47-61 47-129 0-84-81-157-34-29-137-71z\\\"/></svg>\",\n        \"subscript\": \"<svg width=\\\"1792\\\" height=\\\"1792\\\" viewBox=\\\"0 0 1792 1792\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M1025 1369v167H777l-159-252-24-42q-8-9-11-21h-3l-9 21q-10 20-25 44l-155 250H133v-167h128l197-291-185-272H136V638h276l139 228q2 4 23 42 8 9 11 21h3q3-9 11-21l25-42 140-228h257v168H896l-184 267 204 296h109zm639 217v206h-514l-4-27q-3-45-3-46 0-64 26-117t65-86.5 84-65 84-54.5 65-54 26-64q0-38-29.5-62.5T1393 1191q-51 0-97 39-14 11-36 38l-105-92q26-37 63-66 80-65 188-65 110 0 178 59.5t68 158.5q0 66-34.5 118.5t-84 86-99.5 62.5-87 63-41 73h232v-80h126z\\\"/></svg>\",\n        \"superscript\": \"<svg width=\\\"1792\\\" height=\\\"1792\\\" viewBox=\\\"0 0 1792 1792\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M1025 1369v167H777l-159-252-24-42q-8-9-11-21h-3l-9 21q-10 20-25 44l-155 250H133v-167h128l197-291-185-272H136V638h276l139 228q2 4 23 42 8 9 11 21h3q3-9 11-21l25-42 140-228h257v168H896l-184 267 204 296h109zm637-679v206h-514l-3-27q-4-28-4-46 0-64 26-117t65-86.5 84-65 84-54.5 65-54 26-64q0-38-29.5-62.5T1391 295q-51 0-97 39-14 11-36 38l-105-92q26-37 63-66 83-65 188-65 110 0 178 59.5t68 158.5q0 56-24.5 103t-62 76.5T1482 605t-82 50.5-65.5 51.5-30.5 63h232v-80h126z\\\"/></svg>\",\n        \"underline\": \"<svg width=\\\"1792\\\" height=\\\"1792\\\" viewBox=\\\"0 0 1792 1792\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M176 223q-37-2-45-4l-3-88q13-1 40-1 60 0 112 4 132 7 166 7 86 0 168-3 116-4 146-5 56 0 86-2l-1 14 2 64v9q-60 9-124 9-60 0-79 25-13 14-13 132 0 13 .5 32.5t.5 25.5l1 229 14 280q6 124 51 202 35 59 96 92 88 47 177 47 104 0 191-28 56-18 99-51 48-36 65-64 36-56 53-114 21-73 21-229 0-79-3.5-128t-11-122.5T1372 396l-4-59q-5-67-24-88-34-35-77-34l-100 2-14-3 2-86h84l205 10q76 3 196-10l18 2q6 38 6 51 0 7-4 31-45 12-84 13-73 11-79 17-15 15-15 41 0 7 1.5 27t1.5 31q8 19 22 396 6 195-15 304-15 76-41 122-38 65-112 123-75 57-182 89-109 33-255 33-167 0-284-46-119-47-179-122-61-76-83-195-16-80-16-237V475q0-188-17-213-25-36-147-39zm1488 1409v-64q0-14-9-23t-23-9H160q-14 0-23 9t-9 23v64q0 14 9 23t23 9h1472q14 0 23-9t9-23z\\\"/></svg>\"\n    };\n\n    return MarkItUp;\n});\n"]}